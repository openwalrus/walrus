# P4-02: Client Connect, Send, Stream

## Goal

Implement WebSocket connection, message sending, and streaming on
WalrusClient. This is the async I/O layer.

## Depends On

P4-01.

## Design Decisions

- `WalrusClient::connect()` returns a `Connection` struct wrapping a
  tokio-tungstenite WebSocket stream.
- `Connection::send()` serializes `ClientMessage` to JSON, sends as text
  frame, waits for a `ServerMessage` response.
- `Connection::stream()` sends `ClientMessage`, returns
  `impl Stream<Item = Result<ServerMessage>>` yielding messages until
  the server signals completion.
- Uses `Bytes` for WebSocket frame I/O (DD#14).
- Connection is not Clone — one connection per session.

## Files

- **MODIFY** `app/client/src/lib.rs` — add Connection struct, connect/send/stream

## Tests

- `connection_type_check` — verify Connection struct compiles with expected bounds
- Integration tests deferred to Phase 4 completion (requires running gateway)

## Done When

- [ ] `cargo check --workspace` passes
- [ ] Connection, send, stream methods compile
