# P2-02: Add MCP Bridge to walrus-runtime

## Goal

Create an McpBridge that connects to MCP servers via rmcp, converts their
tool definitions to walrus-llm Tool schemas, and dispatches tool calls
through the MCP protocol.

## Depends On

None.

## Design Decisions

- Uses rmcp latest (0.16+) as the MCP SDK.
- McpBridge holds a vector of connected peers. Each peer represents one
  MCP server connection.
- Tool conversion: `rmcp::model::Tool` maps to `walrus_llm::Tool` (name,
  description, input_schema to parameters).
- Call dispatch: `McpBridge::call(name, args)` finds the peer that owns the
  tool and calls `peer.call_tool()`. Returns result as String for tool message.
- Transport: generic over rmcp transport. Stdio via `TokioChildProcess`
  for v1.
- McpBridge is Send + Sync. Peers wrapped in `Arc` for shared access.

## Files

- **CREATE** `crates/runtime/src/mcp.rs` — McpBridge, tool conversion, dispatch
- **MODIFY** `crates/runtime/src/lib.rs` — add mod mcp, re-export McpBridge
- **MODIFY** `crates/runtime/Cargo.toml` — add rmcp dependency

## Tests

- `tool_conversion` — verify rmcp Tool maps to walrus-llm Tool correctly
- `mcp_bridge_no_peers` — verify call to unknown tool returns error string

## Done When

- [x] `cargo check --workspace` and `cargo test --workspace` pass
- [x] McpBridge re-exported from walrus-runtime
