# P4-04: CLI Direct Mode (Embed Runtime Locally)

## Goal

Implement DirectRunner — a struct that wraps Runtime + Provider for running
agents locally without a gateway. This is the default CLI mode.

## Depends On

P4-03.

## Design Decisions

- DirectRunner owns a Runtime and provides send/stream methods matching
  the Runtime API.
- Reads config from env vars: `WALRUS_MODEL`, `WALRUS_API_KEY`. CLI flags
  override env vars.
- Default model: `deepseek-chat`.
- DirectRunner is constructed in `main.rs` when `--gateway` is not provided.
- No trait yet — concrete struct. Runner trait deferred to P4-06.

## Files

- **CREATE** `app/cli/src/direct.rs` — DirectRunner struct
- **MODIFY** `app/cli/src/lib.rs` — add mod direct, re-export
- **MODIFY** `app/cli/src/bin/main.rs` — construct DirectRunner, wire to Send subcommand

## Tests

- `direct_runner_construction` — verify DirectRunner::new succeeds with valid config
- `send_subcommand_direct` — verify `walrus send` dispatches through DirectRunner

## Done When

- [ ] `cargo check --workspace` passes
- [ ] `walrus send "hello"` works in direct mode (requires API key)
