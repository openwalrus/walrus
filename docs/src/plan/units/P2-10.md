# P2-10: Runtime Examples

## Goal

Add runnable examples under `crates/runtime/examples/` covering key runtime
features. Shared helper logic in `examples/common/mod.rs`. The `everything`
example combines all features into a single complex scenario.

## Depends On

P2-09 (simplified runtime API).

## Design Decisions

- Examples live in `crates/runtime/examples/`, run via
  `cargo run -p walrus-runtime --example <name>`.
- Shared logic in `examples/common/mod.rs` (not compiled as an example by
  Cargo): dotenv loading, tracing init, Runtime construction from env,
  streaming-to-stdout helper, REPL loop. Each example uses `mod common;`.
- The `agent` example: loads `DEEPSEEK_API_KEY` from `.env` via `dotenvy`,
  connects Playwright MCP and Claude Code MCP via McpBridge, registers MCP
  tools on the agent, enters a streaming REPL.
- The `everything` example: combines all features — MCP, custom tools, memory
  with store/recall, skills loaded from a directory, leader/worker team
  composition, streaming REPL. Exercises the full runtime surface.
- Simpler examples (memory, skills, tools) exercise non-LLM features and
  run without an API key.
- `tracing-subscriber` and `dotenvy` added as dev-dependencies.

## Files

- **CREATE** `crates/runtime/examples/common/mod.rs` — shared helpers:
  `init_tracing()`, `load_api_key()`, `build_runtime()`,
  `stream_print()`, `repl()`
- **CREATE** `crates/runtime/examples/agent.rs` — MCP REPL with Playwright
  and Claude Code MCP
- **CREATE** `crates/runtime/examples/everything.rs` — all features: MCP,
  tools, memory, skills, teams, streaming REPL
- **CREATE** `crates/runtime/examples/memory.rs` — Memory: set/get/remove/compile
- **CREATE** `crates/runtime/examples/skills.rs` — SkillRegistry: load, match
- **CREATE** `crates/runtime/examples/tools.rs` — register custom tools, dispatch
- **MODIFY** `crates/runtime/Cargo.toml` — add `tracing-subscriber`, `dotenvy`
  dev-deps
- **MODIFY** `Cargo.toml` (workspace root) — add `tracing-subscriber`, `dotenvy`
  workspace deps

## Tests

- `cargo build --examples -p walrus-runtime` succeeds (compilation check)

## Done When

- [ ] `cargo check --workspace` and `cargo clippy --workspace` pass
- [ ] `cargo build --examples -p walrus-runtime` passes
- [ ] `cargo run -p walrus-runtime --example memory` runs without API key
- [ ] `cargo run -p walrus-runtime --example skills` runs without API key
- [ ] `cargo run -p walrus-runtime --example agent` enters REPL with MCP tools
- [ ] `cargo run -p walrus-runtime --example everything` exercises all features
