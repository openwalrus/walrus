# P1-03: Add Channel Trait and Types

## Goal

Define the Channel trait and supporting types in walrus-core.

## Depends On

None.

## Design Decisions

- Channel uses associated types (`Event`, `Config`) — no type erasure at core level.
- `connect()` returns `impl Stream` via RPITIT. `send()` takes `&self`.
- Platform enum is `#[non_exhaustive]` with initial variant Telegram.
- Add `futures-core` to walrus-core's Cargo.toml (already in workspace deps).

## Files

- **CREATE** `crates/core/src/channel.rs`
- **MODIFY** `crates/core/src/lib.rs` — add mod, re-export types
- **MODIFY** `crates/core/Cargo.toml` — add futures-core dependency

## Types

- **Channel trait**: `platform() -> Platform`, `async connect() -> impl Stream<Item = Event>`, `async send(ChannelMessage) -> Result<()>`
- **Platform**: non-exhaustive enum (Telegram). Derives: Debug, Clone, Copy, PartialEq, Eq.
- **ChannelMessage**: platform, channel_id, sender_id, content, attachments, reply_to, timestamp.
- **Attachment**: kind, url, name. **AttachmentKind**: Image, File, Audio, Video.
- **Conversion**: `From<ChannelMessage> for llm::Message` (extracts content as user message).

## Tests

- `platform_enum_variants` — verify Telegram variant exists
- `channel_message_to_llm_message` — verify From conversion extracts content
- `attachment_kind_variants` — verify Image, File, Audio, Video variants

## Done When

- [ ] `cargo check --workspace` and `cargo test --workspace` pass
- [ ] All types re-exported from walrus-core
