# P1-07: Create walrus-sqlite Crate with Schema

## Goal

Create the walrus-sqlite crate skeleton: Cargo.toml, SqliteMemory struct, and SQLite
schema (memories table + FTS5 virtual table + sync triggers).

## Depends On

P1-01, P1-02, P1-05.

## Design Decisions

- rusqlite with `bundled` feature — no system SQLite dependency.
- SqliteMemory holds `rusqlite::Connection` in a `Mutex` (Connection is Send but not Sync).
- Generic over Embedder: `SqliteMemory<E: Embedder>`. No dyn dispatch.
- Schema created on construction via `CREATE TABLE IF NOT EXISTS`.
- FTS5 triggers (AFTER INSERT/UPDATE/DELETE) keep full-text index in sync.
- Timestamps are `u64` via `std::time::SystemTime`. No chrono.

## Files

- **CREATE** `crates/sqlite/Cargo.toml` — depends on walrus-core, rusqlite
- **CREATE** `crates/sqlite/src/lib.rs` — SqliteMemory struct, schema init
- **MODIFY** `Cargo.toml` (workspace root) — add rusqlite to deps, add member

## Key API

- `SqliteMemory::open(path)` — open/create SQLite file
- `SqliteMemory::in_memory()` — in-memory database for testing
- `SqliteMemory::with_embedder(self, E) -> Self`

## Tests

- `open_in_memory` — construction succeeds
- `schema_created` — verify tables exist (query sqlite_master)

## Done When

- [ ] `cargo check --workspace` passes
- [ ] walrus-sqlite crate compiles with rusqlite bundled
- [ ] Schema created on construction
